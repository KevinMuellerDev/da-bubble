@if (channelService.channelMsg) {
<div class="thread-container">
  <div class="thread-head">
    <div class="thread-head-left-side">
      <span>Thread</span>
      <div class="channel-name">
        <span>#</span>
        <div>{{channelService.channelMsgData.title}}</div>
      </div>
    </div>
    <div (click)="closeThread()" class="close-icon "></div>
  </div>
</div>
@if (threadService.isActive) {
<div #scrollContainer class="thread-conversation-container">
  <div class="single-message-container">
    <div class="profile-picture">
      <img [src]="threadService.originMessage.profilePicture" />
    </div>
    <div class="message-wrapper">
      <div class="message-head">
        <div class="message-info">
          <span (click)="openDialogUserInfo()"> {{threadService.originMessage.name}}</span>
          <div class="message-timestamp">
            <span>{{threadService.originMessage.timestamp | date:'shortTime':'':'de'}}</span>
          </div>
        </div>
      </div>
      <div class="message">
        <span> {{threadService.originMessage.message}}</span>
      </div>
    </div>
  </div>
  <div class="divider-container">
    <span>2 Antworten</span>
    <div class="divider"></div>
  </div>
  <div *ngFor="let message of  threadService.messages ; let i = index; let isEven = even; let isLast = last"
    class="thread-conversation-container">

    <div class="single-message-container" [ngClass]="{ 'inverted-message': isEven == false}">

      <div class="interaction-container ">
        <div (click)="toggleEmojiPicker(i);toggleEvent($event)" class="add-reaction-icon"></div>
        <div #editMessageContainer id="editMessageContainer" appOutsideclick (outsideClick)="onOutsideClick(i,$event)"
          [ngClass]="{'edit-message-left': userId == message.id, 'edit-message-right': userId != message.id}"
          *ngIf="emojiService.openEditMessageToggle[i]  && userId == message.id">
          <span class="edit-message-span" (click)="editMessageFunction()">Nachricht bearbeiten</span>
        </div>
      </div>

      <div id="emojiPickerContainer-thread-{{i}}">
        <emoji-mart [darkMode]=false #emojiPickerContainerThread [emojiTooltip]=true [showSingleCategory]=true
          [enableSearch]=false appOutsideclick (outsideClick)="onOutsideClick(i,$event)" [totalFrequentLines]="1"
          [ngClass]="{'emoji-mart-left-thread': message.id == 'ich',  'emoji-mart-right-thread': message.id != 'ich' }"
          (emojiClick)="emojiclick()" *ngIf="emojiService.showEmojiPickerArrayThread[i]" set="google"></emoji-mart>
      </div>

      <div class="profile-picture">
        <img referrerpolicy="no-referrer" [src]="message.profilePicture" />
      </div>
      <div class="message-wrapper">
        <div class="message-head">
          <div class="message-info">
            <span (click)="openDialogUserInfo()"> {{message.name}}</span>
            <div class="message-timestamp">
              <span>{{message.timestamp | date:'shortTime':'':'de'}}</span>
            </div>
          </div>
        </div>
        <div class="message">
          <span> {{message.message}}</span>
        </div>
      </div>
    </div>

  </div>

</div>
}

}